<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>PublishMQTT</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">PublishMQTT</h1><h2>Description: </h2><p>Publishes a message to an MQTT topic</p><h3>Tags: </h3><p>publish, MQTT, IOT</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, whether a property supports the <a href="../../../../../html/expression-language-guide.html">NiFi Expression Language</a>, and whether a property is considered "sensitive", meaning that its value will be encrypted. Before entering a value in a sensitive property, ensure that the <strong>nifi.properties</strong> file has an entry for the property <strong>nifi.sensitive.props.key</strong>.</p><table id="properties"><tr><th>Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Broker URI</strong></td><td></td><td id="allowable-values"></td><td id="description">The URI to use to connect to the MQTT broker (e.g. tcp://localhost:1883). The 'tcp', 'ssl', 'ws' and 'wss' schemes are supported. In order to use 'ssl', the SSL Context Service property must be set.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Client ID</td><td></td><td id="allowable-values"></td><td id="description">MQTT client ID to use. If not set, a UUID will be generated.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Username</td><td></td><td id="allowable-values"></td><td id="description">Username to use when connecting to the broker<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Password</td><td></td><td id="allowable-values"></td><td id="description">Password to use when connecting to the broker<br/><strong>Sensitive Property: true</strong></td></tr><tr><td id="name">SSL Context Service</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>SSLContextService<br/><strong>Implementations: </strong><a href="../../../nifi-ssl-context-service-nar/1.16.3/org.apache.nifi.ssl.StandardRestrictedSSLContextService/index.html">StandardRestrictedSSLContextService</a><br/><a href="../../../nifi-ssl-context-service-nar/1.16.3/org.apache.nifi.ssl.StandardSSLContextService/index.html">StandardSSLContextService</a></td><td id="description">The SSL Context Service used to provide client certificate information for TLS/SSL connections.</td></tr><tr><td id="name">Last Will Topic</td><td></td><td id="allowable-values"></td><td id="description">The topic to send the client's Last Will to. If the Last Will topic and message are not set then a Last Will will not be sent.</td></tr><tr><td id="name">Last Will Message</td><td></td><td id="allowable-values"></td><td id="description">The message to send as the client's Last Will. If the Last Will topic and message are not set then a Last Will will not be sent.</td></tr><tr><td id="name">Last Will Retain</td><td></td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">Whether to retain the client's Last Will. If the Last Will topic and message are not set then a Last Will will not be sent.</td></tr><tr><td id="name">Last Will QoS Level</td><td></td><td id="allowable-values"><ul><li>0 - At most once <img src="../../../../../html/images/iconInfo.png" alt="Best effort delivery. A message won’t be acknowledged by the receiver or stored and redelivered by the sender. This is often called “fire and forget” and provides the same guarantee as the underlying TCP protocol." title="Best effort delivery. A message won’t be acknowledged by the receiver or stored and redelivered by the sender. This is often called “fire and forget” and provides the same guarantee as the underlying TCP protocol."></img></li><li>1 - At least once <img src="../../../../../html/images/iconInfo.png" alt="Guarantees that a message will be delivered at least once to the receiver. The message can also be delivered more than once" title="Guarantees that a message will be delivered at least once to the receiver. The message can also be delivered more than once"></img></li><li>2 - Exactly once <img src="../../../../../html/images/iconInfo.png" alt="Guarantees that each message is received only once by the counterpart. It is the safest and also the slowest quality of service level. The guarantee is provided by two round-trip flows between sender and receiver." title="Guarantees that each message is received only once by the counterpart. It is the safest and also the slowest quality of service level. The guarantee is provided by two round-trip flows between sender and receiver."></img></li></ul></td><td id="description">QoS level to be used when publishing the Last Will Message</td></tr><tr><td id="name"><strong>Session state</strong></td><td id="default-value">true</td><td id="allowable-values"><ul><li>Clean Session <img src="../../../../../html/images/iconInfo.png" alt="Client and Server discard any previous session and start a new one. This session lasts as long as the network connection. State data associated with this session is not reused in any subsequent session" title="Client and Server discard any previous session and start a new one. This session lasts as long as the network connection. State data associated with this session is not reused in any subsequent session"></img></li><li>Resume Session <img src="../../../../../html/images/iconInfo.png" alt="Server resumes communications with the client based on state from the current session (as identified by the ClientID). The client and server store the session after the client and server are disconnected. After the disconnection of a session that was not a clean session, the server stores further QoS 1 and QoS 2 messages that match any subscriptions that the client had at the time of disconnection as part of the session state" title="Server resumes communications with the client based on state from the current session (as identified by the ClientID). The client and server store the session after the client and server are disconnected. After the disconnection of a session that was not a clean session, the server stores further QoS 1 and QoS 2 messages that match any subscriptions that the client had at the time of disconnection as part of the session state"></img></li></ul></td><td id="description">Whether to start afresh or resume previous flows. See the allowable value descriptions for more details.</td></tr><tr><td id="name"><strong>MQTT Specification Version</strong></td><td id="default-value">0</td><td id="allowable-values"><ul><li>AUTO <img src="../../../../../html/images/iconInfo.png" alt="Start with v3.1.1 and fallback to v3.1.0 if not supported by a broker" title="Start with v3.1.1 and fallback to v3.1.0 if not supported by a broker"></img></li><li>v3.1.1</li><li>v3.1.0</li></ul></td><td id="description">The MQTT specification version when connecting with the broker. See the allowable value descriptions for more details.</td></tr><tr><td id="name">Connection Timeout (seconds)</td><td id="default-value">30</td><td id="allowable-values"></td><td id="description">Maximum time interval the client will wait for the network connection to the MQTT server to be established. The default timeout is 30 seconds. A value of 0 disables timeout processing meaning the client will wait until the network connection is made successfully or fails.</td></tr><tr><td id="name">Keep Alive Interval (seconds)</td><td id="default-value">60</td><td id="allowable-values"></td><td id="description">Defines the maximum time interval between messages sent or received. It enables the client to detect if the server is no longer available, without having to wait for the TCP/IP timeout. The client will ensure that at least one message travels across the network within each keep alive period. In the absence of a data-related message during the time period, the client sends a very small "ping" message, which the server will acknowledge. A value of 0 disables keepalive processing in the client.</td></tr><tr><td id="name"><strong>Topic</strong></td><td></td><td id="allowable-values"></td><td id="description">The topic to publish the message to.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Quality of Service(QoS)</strong></td><td></td><td id="allowable-values"></td><td id="description">The Quality of Service(QoS) to send the message with. Accepts three values '0', '1' and '2'; '0' for 'at most once', '1' for 'at least once', '2' for 'exactly once'. Expression language is allowed in order to support publishing messages with different QoS but the end value of the property must be either '0', '1' or '2'. <br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Retain Message</strong></td><td></td><td id="allowable-values"></td><td id="description">Whether or not the retain flag should be set on the MQTT message.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr></table><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>success</td><td>FlowFiles that are sent successfully to the destination are transferred to this relationship.</td></tr><tr><td>failure</td><td>FlowFiles that failed to send to the destination are transferred to this relationship.</td></tr></table><h3>Reads Attributes: </h3>None specified.<h3>Writes Attributes: </h3>None specified.<h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component requires an incoming relationship.<h3>System Resource Considerations:</h3><table id="system-resource-considerations"><tr><th>Resource</th><th>Description</th></tr><tr><td>MEMORY</td><td>An instance of this component can cause high usage of this system resource.  Multiple instances or high concurrency settings may result a degradation of performance.</td></tr></table><h3>See Also:</h3><p><a href="../org.apache.nifi.processors.mqtt.ConsumeMQTT/index.html">ConsumeMQTT</a></p></body></html>