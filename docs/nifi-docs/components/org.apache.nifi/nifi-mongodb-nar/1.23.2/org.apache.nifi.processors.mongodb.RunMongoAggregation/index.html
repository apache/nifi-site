<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>RunMongoAggregation</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">RunMongoAggregation</h1><h2>Description: </h2><p>A processor that runs an aggregation query whenever a flowfile is received.</p><p><a href="additionalDetails.html">Additional Details...</a></p><h3>Tags: </h3><p>mongo, aggregation, aggregate</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, and whether a property supports the <a href="../../../../../html/expression-language-guide.html">NiFi Expression Language</a>.</p><table id="properties"><tr><th>Display Name</th><th>API Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name">Client Service</td><td>mongo-client-service</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>MongoDBClientService<br/><strong>Implementation: </strong><a href="../../../nifi-mongodb-services-nar/1.23.2/org.apache.nifi.mongodb.MongoDBControllerService/index.html">MongoDBControllerService</a></td><td id="description">If configured, this property will use the assigned client service for connection pooling.</td></tr><tr><td id="name">Mongo URI</td><td>Mongo URI</td><td></td><td id="allowable-values"></td><td id="description">MongoURI, typically of the form: mongodb://host1[:port1][,host2[:port2],...]<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Mongo Database Name</strong></td><td>Mongo Database Name</td><td></td><td id="allowable-values"></td><td id="description">The name of the database to use<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Mongo Collection Name</strong></td><td>Mongo Collection Name</td><td></td><td id="allowable-values"></td><td id="description">The name of the collection to use<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name">SSL Context Service</td><td>ssl-context-service</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>SSLContextService<br/><strong>Implementations: </strong><a href="../../../nifi-ssl-context-service-nar/1.23.2/org.apache.nifi.ssl.StandardRestrictedSSLContextService/index.html">StandardRestrictedSSLContextService</a><br/><a href="../../../nifi-ssl-context-service-nar/1.23.2/org.apache.nifi.ssl.StandardSSLContextService/index.html">StandardSSLContextService</a></td><td id="description">The SSL Context Service used to provide client certificate information for TLS/SSL connections.</td></tr><tr><td id="name">Client Auth</td><td>ssl-client-auth</td><td id="default-value">REQUIRED</td><td id="allowable-values"><ul><li>WANT</li><li>REQUIRED</li><li>NONE</li></ul></td><td id="description">Client authentication policy when connecting to secure (TLS/SSL) cluster. Possible values are REQUIRED, WANT, NONE. This property is only used when an SSL Context has been defined and enabled.</td></tr><tr><td id="name"><strong>Character Set</strong></td><td>mongo-charset</td><td id="default-value">UTF-8</td><td id="allowable-values"></td><td id="description">Specifies the character set of the document data.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Query</strong></td><td>mongo-agg-query</td><td></td><td id="allowable-values"></td><td id="description">The aggregation query to be executed.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Allow Disk Use</strong></td><td>allow-disk-use</td><td id="default-value">false</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">Set this to true to enable writing data to temporary files to prevent exceeding the maximum memory use limit during aggregation pipeline staged when handling large datasets.</td></tr><tr><td id="name"><strong>JSON Type</strong></td><td>json-type</td><td id="default-value">Extended JSON</td><td id="allowable-values"><ul><li>Extended JSON <img src="../../../../../html/images/iconInfo.png" alt="Use MongoDB's &quot;extended JSON&quot;. This is the JSON generated with toJson() on a MongoDB Document from the Java driver" title="Use MongoDB's &quot;extended JSON&quot;. This is the JSON generated with toJson() on a MongoDB Document from the Java driver"></img></li><li>Standard JSON <img src="../../../../../html/images/iconInfo.png" alt="Generate a JSON document that conforms to typical JSON conventions instead of Mongo-specific conventions." title="Generate a JSON document that conforms to typical JSON conventions instead of Mongo-specific conventions."></img></li></ul></td><td id="description">By default, MongoDB's Java driver returns "extended JSON". Some of the features of this variant of JSON may cause problems for other JSON parsers that expect only standard JSON types and conventions. This configuration setting  controls whether to use extended JSON or provide a clean view that conforms to standard JSON.</td></tr><tr><td id="name">Query Output Attribute</td><td>mongo-query-attribute</td><td></td><td id="allowable-values"></td><td id="description">If set, the query will be written to a specified attribute on the output flowfiles.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name">Batch Size</td><td>Batch Size</td><td id="default-value">100</td><td id="allowable-values"></td><td id="description">The number of elements returned from the server in one batch.</td></tr><tr><td id="name">Results Per FlowFile</td><td>results-per-flowfile</td><td id="default-value">1</td><td id="allowable-values"></td><td id="description">How many results to put into a flowfile at once. The whole body will be treated as a JSON array of results.</td></tr><tr><td id="name">Date Format</td><td>mongo-date-format</td><td id="default-value">yyyy-MM-dd'T'HH:mm:ss'Z'</td><td id="allowable-values"></td><td id="description">The date format string to use for formatting Date fields that are returned from Mongo. It is only applied when the JSON output format is set to Standard JSON. Full documentation for format characters can be found here: https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name">SSL Context Service</td><td>ssl-context-service</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>SSLContextService<br/><strong>Implementations: </strong><a href="../../../nifi-ssl-context-service-nar/1.23.2/org.apache.nifi.ssl.StandardRestrictedSSLContextService/index.html">StandardRestrictedSSLContextService</a><br/><a href="../../../nifi-ssl-context-service-nar/1.23.2/org.apache.nifi.ssl.StandardSSLContextService/index.html">StandardSSLContextService</a></td><td id="description">The SSL Context Service used to provide client certificate information for TLS/SSL connections.</td></tr><tr><td id="name">Client Auth</td><td>ssl-client-auth</td><td id="default-value">REQUIRED</td><td id="allowable-values"><ul><li>WANT</li><li>REQUIRED</li><li>NONE</li></ul></td><td id="description">Client authentication policy when connecting to secure (TLS/SSL) cluster. Possible values are REQUIRED, WANT, NONE. This property is only used when an SSL Context has been defined and enabled.</td></tr></table><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>results</td><td>The result set of the aggregation will be sent to this relationship.</td></tr><tr><td>failure</td><td>The input flowfile gets sent to this relationship when the query fails.</td></tr><tr><td>original</td><td>The input flowfile gets sent to this relationship when the query succeeds.</td></tr></table><h3>Reads Attributes: </h3>None specified.<h3>Writes Attributes: </h3>None specified.<h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component allows an incoming relationship.<h3>System Resource Considerations:</h3>None specified.</body></html>