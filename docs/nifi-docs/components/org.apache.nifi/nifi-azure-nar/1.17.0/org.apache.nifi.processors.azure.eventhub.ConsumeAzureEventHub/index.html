<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>ConsumeAzureEventHub</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">ConsumeAzureEventHub</h1><h2>Description: </h2><p>Receives messages from Azure Event Hubs, writing the contents of the message to the content of the FlowFile.</p><h3>Tags: </h3><p>azure, microsoft, cloud, eventhub, events, streaming, streams</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, whether a property supports the <a href="../../../../../html/expression-language-guide.html">NiFi Expression Language</a>, and whether a property is considered "sensitive", meaning that its value will be encrypted. Before entering a value in a sensitive property, ensure that the <strong>nifi.properties</strong> file has an entry for the property <strong>nifi.sensitive.props.key</strong>.</p><table id="properties"><tr><th>Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Event Hub Namespace</strong></td><td></td><td id="allowable-values"></td><td id="description">The namespace that the Azure Event Hubs is assigned to. This is generally equal to &lt;Event Hub Names&gt;-ns.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Event Hub Name</strong></td><td></td><td id="allowable-values"></td><td id="description">The name of the event hub to pull messages from.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Service Bus Endpoint</strong></td><td id="default-value">Azure</td><td id="allowable-values"><ul><li>Azure <img src="../../../../../html/images/iconInfo.png" alt="Servicebus endpoint for general use" title="Servicebus endpoint for general use"></img></li><li>Azure China <img src="../../../../../html/images/iconInfo.png" alt="Servicebus endpoint for China" title="Servicebus endpoint for China"></img></li><li>Azure Germany <img src="../../../../../html/images/iconInfo.png" alt="Servicebus endpoint for Germany" title="Servicebus endpoint for Germany"></img></li><li>Azure US Government <img src="../../../../../html/images/iconInfo.png" alt="Servicebus endpoint for US Government" title="Servicebus endpoint for US Government"></img></li></ul></td><td id="description">To support namespaces not in the default windows.net domain.</td></tr><tr><td id="name">Shared Access Policy Name</td><td></td><td id="allowable-values"></td><td id="description">The name of the shared access policy. This policy must have Listen claims.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Shared Access Policy Primary Key</td><td></td><td id="allowable-values"></td><td id="description">The primary key of the shared access policy<br/><strong>Sensitive Property: true</strong></td></tr><tr><td id="name">Use Azure Managed Identity</td><td id="default-value">false</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">Choose whether or not to use the managed identity of Azure VM/VMSS</td></tr><tr><td id="name"><strong>Consumer Group</strong></td><td id="default-value">$Default</td><td id="allowable-values"></td><td id="description">The name of the consumer group to use.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Consumer Hostname</td><td></td><td id="allowable-values"></td><td id="description">The hostname of this event hub consumer instance. If not specified, an unique identifier is generated in 'nifi-&lt;UUID&gt;' format.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Record Reader</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordReaderFactory<br/><strong>Implementations: </strong><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.grok.GrokReader/index.html">GrokReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.json.JsonTreeReader/index.html">JsonTreeReader</a><br/><a href="../../../nifi-parquet-nar/1.17.0/org.apache.nifi.parquet.ParquetReader/index.html">ParquetReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.lookup.ReaderLookup/index.html">ReaderLookup</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.windowsevent.WindowsEventLogReader/index.html">WindowsEventLogReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.cef.CEFReader/index.html">CEFReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.syslog.SyslogReader/index.html">SyslogReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.avro.AvroReader/index.html">AvroReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.xml.XMLReader/index.html">XMLReader</a><br/><a href="../../../nifi-scripting-nar/1.17.0/org.apache.nifi.record.script.ScriptedReader/index.html">ScriptedReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.json.JsonPathReader/index.html">JsonPathReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.syslog.Syslog5424Reader/index.html">Syslog5424Reader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.csv.CSVReader/index.html">CSVReader</a></td><td id="description">The Record Reader to use for reading received messages. The event hub name can be referred by Expression Language '${eventhub.name}' to access a schema.</td></tr><tr><td id="name">Record Writer</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordSetWriterFactory<br/><strong>Implementations: </strong><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.csv.CSVRecordSetWriter/index.html">CSVRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.json.JsonRecordSetWriter/index.html">JsonRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.avro.AvroRecordSetWriter/index.html">AvroRecordSetWriter</a><br/><a href="../../../nifi-parquet-nar/1.17.0/org.apache.nifi.parquet.ParquetRecordSetWriter/index.html">ParquetRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.xml.XMLRecordSetWriter/index.html">XMLRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.text.FreeFormTextRecordSetWriter/index.html">FreeFormTextRecordSetWriter</a><br/><a href="../../../nifi-scripting-nar/1.17.0/org.apache.nifi.record.script.ScriptedRecordSetWriter/index.html">ScriptedRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.17.0/org.apache.nifi.lookup.RecordSetWriterLookup/index.html">RecordSetWriterLookup</a></td><td id="description">The Record Writer to use for serializing Records to an output FlowFile. The event hub name can be referred by Expression Language '${eventhub.name}' to access a schema. If not specified, each message will create a FlowFile.</td></tr><tr><td id="name"><strong>Initial Offset</strong></td><td id="default-value">End of stream</td><td id="allowable-values"><ul><li>Start of stream <img src="../../../../../html/images/iconInfo.png" alt="Read from the oldest message retained in the stream." title="Read from the oldest message retained in the stream."></img></li><li>End of stream <img src="../../../../../html/images/iconInfo.png" alt="Ignore old retained messages even if exist, start reading new ones from now." title="Ignore old retained messages even if exist, start reading new ones from now."></img></li></ul></td><td id="description">Specify where to start receiving messages if offset is not stored in Azure Storage.</td></tr><tr><td id="name"><strong>Prefetch Count</strong></td><td id="default-value">300</td><td id="allowable-values"></td><td id="description">No Description Provided.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Batch Size</strong></td><td id="default-value">10</td><td id="allowable-values"></td><td id="description">The number of messages to process within a NiFi session. This parameter affects throughput and consistency. NiFi commits its session and Event Hubs checkpoints after processing this number of messages. If NiFi session is committed, but fails to create an Event Hubs checkpoint, then it is possible that the same messages will be received again. The higher number, the higher throughput, but possibly less consistent.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Message Receive Timeout</strong></td><td id="default-value">1 min</td><td id="allowable-values"></td><td id="description">The amount of time this consumer should wait to receive the Prefetch Count before returning.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name"><strong>Storage Account Name</strong></td><td></td><td id="allowable-values"></td><td id="description">Name of the Azure Storage account to store event hub consumer group state.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Storage Account Key</td><td></td><td id="allowable-values"></td><td id="description">The Azure Storage account key to store event hub consumer group state.<br/><strong>Sensitive Property: true</strong><br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Storage SAS Token</td><td></td><td id="allowable-values"></td><td id="description">The Azure Storage SAS token to store Event Hub consumer group state. Always starts with a ? character.<br/><strong>Sensitive Property: true</strong><br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr><tr><td id="name">Storage Container Name</td><td></td><td id="allowable-values"></td><td id="description">Name of the Azure Storage container to store the event hub consumer group state. If not specified, event hub name is used.<br/><strong>Supports Expression Language: true (will be evaluated using variable registry only)</strong></td></tr></table><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>success</td><td>FlowFiles received from Event Hub.</td></tr><tr><td>parse.failure</td><td>If a message from event hub cannot be parsed using the configured Record Reader or failed to be written by the configured Record Writer, the contents of the message will be routed to this Relationship as its own individual FlowFile.</td></tr></table><h3>Reads Attributes: </h3>None specified.<h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>eventhub.enqueued.timestamp</td><td>The time (in milliseconds since epoch, UTC) at which the message was enqueued in the event hub</td></tr><tr><td>eventhub.offset</td><td>The offset into the partition at which the message was stored</td></tr><tr><td>eventhub.sequence</td><td>The sequence number associated with the message</td></tr><tr><td>eventhub.name</td><td>The name of the event hub from which the message was pulled</td></tr><tr><td>eventhub.partition</td><td>The name of the partition from which the message was pulled</td></tr><tr><td>eventhub.property.*</td><td>The application properties of this message. IE: 'application' would be 'eventhub.property.application'</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component does not allow an incoming relationship.<h3>System Resource Considerations:</h3>None specified.</body></html>