<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>UpdateHiveTable</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">UpdateHiveTable</h1><h2>Description: </h2><p>This processor uses a Hive JDBC connection and incoming records to generate any Hive 1.2 table changes needed to support the incoming records.</p><h3>Tags: </h3><p>hive, metadata, jdbc, database, table</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, and whether a property supports the <a href="../../../../../html/expression-language-guide.html">NiFi Expression Language</a>.</p><table id="properties"><tr><th>Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Record Reader</strong></td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordReaderFactory<br/><strong>Implementations: </strong><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.json.JsonPathReader/index.html">JsonPathReader</a><br/><a href="../../../nifi-parquet-nar/1.16.3/org.apache.nifi.parquet.ParquetReader/index.html">ParquetReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.windowsevent.WindowsEventLogReader/index.html">WindowsEventLogReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.lookup.ReaderLookup/index.html">ReaderLookup</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.grok.GrokReader/index.html">GrokReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.json.JsonTreeReader/index.html">JsonTreeReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.avro.AvroReader/index.html">AvroReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.xml.XMLReader/index.html">XMLReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.syslog.Syslog5424Reader/index.html">Syslog5424Reader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.syslog.SyslogReader/index.html">SyslogReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.csv.CSVReader/index.html">CSVReader</a><br/><a href="../../../nifi-scripting-nar/1.16.3/org.apache.nifi.record.script.ScriptedReader/index.html">ScriptedReader</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.cef.CEFReader/index.html">CEFReader</a></td><td id="description">The service for reading incoming flow files. The reader is only used to determine the schema of the records, the actual records will not be processed.</td></tr><tr><td id="name"><strong>Hive Database Connection Pooling Service</strong></td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>HiveDBCPService<br/><strong>Implementation: </strong><a href="../org.apache.nifi.dbcp.hive.HiveConnectionPool/index.html">HiveConnectionPool</a></td><td id="description">The Hive Controller Service that is used to obtain connection(s) to the Hive database</td></tr><tr><td id="name"><strong>Table Name</strong></td><td></td><td id="allowable-values"></td><td id="description">The name of the database table to update. If the table does not exist, then it will either be created or an error thrown, depending on the value of the Create Table property.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name">Partition Clause</td><td></td><td id="allowable-values"></td><td id="description">Specifies a comma-separated list of attribute names and optional data types corresponding to the partition columns of the target table. Simply put, if the table is partitioned or is to be created with partitions, each partition name should be an attribute on the FlowFile and listed in this property. This assumes all incoming records belong to the same partition and the partition columns are not fields in the record. An example of specifying this field is if PartitionRecord is upstream and two partition columns 'name' (of type string) and 'age' (of type integer) are used, then this property can be set to 'name string, age int'. The data types are optional and if partition(s) are to be created they will default to string type if not specified. For non-string primitive types, specifying the data type for existing partition columns is helpful for interpreting the partition value(s). If the table exists, the data types need not be specified (and are ignored in that case). This property must be set if the table is partitioned, and there must be an attribute for each partition column in the table. The values of the attributes will be used as the partition values, and the resulting output.path attribute value will reflect the location of the partition in the filesystem (for use downstream in processors such as PutHDFS).<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr><tr><td id="name"><strong>Create Table Strategy</strong></td><td id="default-value">Fail If Not Exists</td><td id="allowable-values"><ul><li>Create If Not Exists <img src="../../../../../html/images/iconInfo.png" alt="Create a table with the given schema if it does not already exist" title="Create a table with the given schema if it does not already exist"></img></li><li>Fail If Not Exists <img src="../../../../../html/images/iconInfo.png" alt="If the target does not already exist, log an error and route the flowfile to failure" title="If the target does not already exist, log an error and route the flowfile to failure"></img></li></ul></td><td id="description">Specifies how to process the target table when it does not exist (create it, fail, e.g.).</td></tr><tr><td id="name"><strong>Create Table Management Strategy</strong></td><td id="default-value">Managed</td><td id="allowable-values"><ul><li>Managed <img src="../../../../../html/images/iconInfo.png" alt="Any tables created by this processor will be managed tables (see Hive documentation for details)." title="Any tables created by this processor will be managed tables (see Hive documentation for details)."></img></li><li>External <img src="../../../../../html/images/iconInfo.png" alt="Any tables created by this processor will be external tables located at the `External Table Location` property value." title="Any tables created by this processor will be external tables located at the `External Table Location` property value."></img></li><li>Use 'hive.table.management.strategy' Attribute <img src="../../../../../html/images/iconInfo.png" alt="Inspects the 'hive.table.management.strategy' FlowFile attribute to determine the table management strategy. The value of this attribute must be a case-insensitive match to one of the other allowable values (Managed, External, e.g.)." title="Inspects the 'hive.table.management.strategy' FlowFile attribute to determine the table management strategy. The value of this attribute must be a case-insensitive match to one of the other allowable values (Managed, External, e.g.)."></img></li></ul></td><td id="description">Specifies (when a table is to be created) whether the table is a managed table or an external table. Note that when External is specified, the 'External Table Location' property must be specified. If the 'hive.table.management.strategy' value is selected, 'External Table Location' must still be specified, but can contain Expression Language or be set to the empty string, and is ignored when the attribute evaluates to 'Managed'.<br/><br/><strong>This Property is only considered if </strong><strong>the &lt;Create Table Strategy&gt; Property has a value of "Create If Not Exists".</strong></td></tr><tr><td id="name"><strong>External Table Location</strong></td><td></td><td id="allowable-values"></td><td id="description">Specifies (when an external table is to be created) the file path (in HDFS, e.g.) to store table data.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong><br/><br/><strong>This Property is only considered if </strong><strong>the &lt;Create Table Management Strategy&gt; Property is set to one of the following values: "Use 'hive.table.management.strategy' Attribute", "External"</strong></td></tr><tr><td id="name"><strong>Create Table Storage Format</strong></td><td id="default-value">TEXTFILE</td><td id="allowable-values"><ul><li>TEXTFILE <img src="../../../../../html/images/iconInfo.png" alt="Stored as plain text files. TEXTFILE is the default file format, unless the configuration parameter hive.default.fileformat has a different setting." title="Stored as plain text files. TEXTFILE is the default file format, unless the configuration parameter hive.default.fileformat has a different setting."></img></li><li>SEQUENCEFILE <img src="../../../../../html/images/iconInfo.png" alt="Stored as compressed Sequence Files." title="Stored as compressed Sequence Files."></img></li><li>ORC <img src="../../../../../html/images/iconInfo.png" alt="Stored as ORC file format. Supports ACID Transactions &amp; Cost-based Optimizer (CBO). Stores column-level metadata." title="Stored as ORC file format. Supports ACID Transactions &amp; Cost-based Optimizer (CBO). Stores column-level metadata."></img></li><li>PARQUET <img src="../../../../../html/images/iconInfo.png" alt="Stored as Parquet format for the Parquet columnar storage format." title="Stored as Parquet format for the Parquet columnar storage format."></img></li><li>AVRO <img src="../../../../../html/images/iconInfo.png" alt="Stored as Avro format." title="Stored as Avro format."></img></li><li>RCFILE <img src="../../../../../html/images/iconInfo.png" alt="Stored as Record Columnar File format." title="Stored as Record Columnar File format."></img></li></ul></td><td id="description">If a table is to be created, the specified storage format will be used.<br/><br/><strong>This Property is only considered if </strong><strong>the &lt;Create Table Strategy&gt; Property has a value of "Create If Not Exists".</strong></td></tr><tr><td id="name"><strong>Update Field Names</strong></td><td id="default-value">false</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">This property indicates whether to update the output schema such that the field names are set to the exact column names from the specified table. This should be used if the incoming record field names may not match the table's column names in terms of upper- and lower-case. For example, this property should be set to true if the output FlowFile (and target table storage) is Avro format, as Hive/Impala expects the field names to match the column names exactly.</td></tr><tr><td id="name"><strong>Record Writer</strong></td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordSetWriterFactory<br/><strong>Implementations: </strong><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.lookup.RecordSetWriterLookup/index.html">RecordSetWriterLookup</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.avro.AvroRecordSetWriter/index.html">AvroRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.json.JsonRecordSetWriter/index.html">JsonRecordSetWriter</a><br/><a href="../../../nifi-scripting-nar/1.16.3/org.apache.nifi.record.script.ScriptedRecordSetWriter/index.html">ScriptedRecordSetWriter</a><br/><a href="../../../nifi-parquet-nar/1.16.3/org.apache.nifi.parquet.ParquetRecordSetWriter/index.html">ParquetRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.xml.XMLRecordSetWriter/index.html">XMLRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.text.FreeFormTextRecordSetWriter/index.html">FreeFormTextRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/1.16.3/org.apache.nifi.csv.CSVRecordSetWriter/index.html">CSVRecordSetWriter</a></td><td id="description">Specifies the Controller Service to use for writing results to a FlowFile. The Record Writer should use Inherit Schema to emulate the inferred schema behavior, i.e. an explicit schema need not be defined in the writer, and will be supplied by the same logic used to infer the schema from the column types. If Create Table Strategy is set 'Create If Not Exists', the Record Writer's output format must match the Record Reader's format in order for the data to be placed in the created table location. Note that this property is only used if 'Update Field Names' is set to true and the field names do not all match the column names exactly. If no update is needed for any field names (or 'Update Field Names' is false), the Record Writer is not used and instead the input FlowFile is routed to success or failure without modification.<br/><br/><strong>This Property is only considered if </strong><strong>the &lt;Update Field Names&gt; Property has a value of "true".</strong></td></tr><tr><td id="name"><strong>Query Timeout</strong></td><td id="default-value">0</td><td id="allowable-values"></td><td id="description">Sets the number of seconds the driver will wait for a query to execute. A value of 0 means no timeout. NOTE: Non-zero values may not be supported by the driver.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and variable registry)</strong></td></tr></table><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>success</td><td>A FlowFile containing records routed to this relationship after the record has been successfully transmitted to Hive.</td></tr><tr><td>failure</td><td>A FlowFile containing records routed to this relationship if the record could not be transmitted to Hive.</td></tr></table><h3>Reads Attributes: </h3><table id="reads-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>hive.table.management.strategy</td><td>This attribute is read if the 'Table Management Strategy' property is configured to use the value of this attribute. The value of this attribute should correspond (ignoring case) to a valid option of the 'Table Management Strategy' property.</td></tr></table><h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>output.table</td><td>This attribute is written on the flow files routed to the 'success' and 'failure' relationships, and contains the target table name.</td></tr><tr><td>output.path</td><td>This attribute is written on the flow files routed to the 'success' and 'failure' relationships, and contains the path on the file system to the table (or partition location if the table is partitioned).</td></tr><tr><td>mime.type</td><td>Sets the mime.type attribute to the MIME Type specified by the Record Writer, only if a Record Writer is specified and Update Field Names is 'true'.</td></tr><tr><td>record.count</td><td>Sets the number of records in the FlowFile, only if a Record Writer is specified and Update Field Names is 'true'.</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component requires an incoming relationship.<h3>System Resource Considerations:</h3>None specified.</body></html>