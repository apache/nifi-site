<!DOCTYPE html>
<html lang="en">
  
<head>
  <title>MiNiFi Getting Started - Apache NiFi</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="keywords" content="">
  <title>MiNiFi Getting Started - Apache NiFi</title>
  <meta property="og:title" content="MiNiFi Getting Started">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://nifi.apache.org/projects/minifi/getting-started/">
  <meta property="og:description" content="">
  <meta name="twitter:title" content="MiNiFi Getting Started">
  <link rel="icon" href="/images/apache-nifi-drop-logo.svg">
  <link rel="stylesheet" href="/uikit/css/uikit.min.css">
  <link rel="stylesheet" href="/uikit/css/uikit-icons.min.css">
  <link rel="stylesheet" href="/css/main.css?version=1">
  <script>
  var _paq = window._paq = window._paq || [];
  _paq.push(['disableCookies']);
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var baseUri = "//matomo.privacy.apache.org/";
    _paq.push(['setTrackerUrl', baseUri + 'matomo.php']);
    _paq.push(['setSiteId', '28']);
    var trackerElement = document.createElement('script');
    var firstScriptElement = document.getElementsByTagName('script')[0];
    trackerElement.async = true;
    trackerElement.src = baseUri + 'matomo.js';
    var firstScriptElement = document.getElementsByTagName('script')[0];
    if (window.location.host === 'nifi.apache.org') {
      firstScriptElement.parentNode.insertBefore(trackerElement, firstScriptElement);
    }
  })();
</script>
</head>
<body class="section-background">
    

<div class="nav-container" uk-sticky="sel-target: .uk-navbar-container; cls-active: uk-navbar-sticky">
  <nav class="uk-container uk-navbar-container uk-navbar-transparent" uk-navbar>
    <div class="uk-navbar-left">
      <ul class="uk-navbar-nav">
        <li>
          <a class="uk-navbar-item" href="/">
            <img src="/images/apache-nifi-drop-logo.svg" alt="Apache NiFi Logo" class="navbar-logo" width="36" height="48" />
          </a>
        </li>


          
          
          <li class="">
            <a href="/documentation/">Documentation</a>
            
            <ul class="uk-dropdown" uk-dropdown="mode: click; animation: uk-animation-slide-top-small; duration: 300;">
              
              <li class="">
                <a href="/documentation" >
                  NiFi Documentation 2.0.0-M1
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/documentation/project-documentation/" >
                  NiFi Documentation 1.24.0
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/documentation/security/" >
                  Security Reporting
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/documentation/videos/" >
                  NiFi Videos
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="https://cwiki.apache.org/confluence/display/NIFI" target="_blank" rel="noopener noreferrer">
                  NiFi Wiki
                  <span uk-icon="link"></span>
                </a>

              

              </li>
              
            </ul>
            
          </li>
          
          <li class="">
            <a href="/development/">Development</a>
            
            <ul class="uk-dropdown" uk-dropdown="mode: click; animation: uk-animation-slide-top-small; duration: 300;">
              
              <li class="">
                <a href="/development" >
                  Developer Guide
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/development/gpg/" >
                  Commit and Release Signing
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/development/release-guide/" >
                  Release Guide
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/development/nifi-maven-release-guide/" >
                  NAR Maven Plugin Release Guide
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/development/fds-release-guide/" >
                  FDS Release Guide
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/development/licensing-guide/" >
                  Licensing Guide
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="https://cwiki.apache.org/confluence/display/NIFI/Contributor&#43;Guide" target="_blank" rel="noopener noreferrer">
                  Contributor Guide
                  <span uk-icon="link"></span>
                </a>

              

              </li>
              
              <li class="">
                <a href="https://issues.apache.org/jira/browse/NIFI" target="_blank" rel="noopener noreferrer">
                  Issues
                  <span uk-icon="link"></span>
                </a>

              

              </li>
              
              <li class="">
                <a href="https://github.com/apache/nifi" target="_blank" rel="noopener noreferrer">
                  GitHub Source
                  <span uk-icon="link"></span>
                </a>

              

              </li>
              
            </ul>
            
          </li>
          
          <li class="">
            <a href="/community/">Community</a>
            
            <ul class="uk-dropdown" uk-dropdown="mode: click; animation: uk-animation-slide-top-small; duration: 300;">
              
              <li class="">
                <a href="/community/mailing_lists/" >
                  Mailing Lists
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/community" >
                  People
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/community/powered-by-nifi/" >
                  Powered by NiFi
                  
                </a>

              

              </li>
              
            </ul>
            
          </li>
          
          <li class="uk-active">
            <a href="/projects/">Projects</a>
            
            <ul class="uk-dropdown" uk-dropdown="mode: click; animation: uk-animation-slide-top-small; duration: 300;">
              
              <li class="">
                <a href="/projects" >
                  Projects Overview
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/projects/minifi/" >
                  MiNiFi
                  
                </a>

              
              <ul>
                
                <li class="uk-active">
                <a href="/projects/minifi/getting-started/" >
                  Getting Started
                  
                </a>
                </li>
                
                <li class="">
                <a href="/projects/minifi/minifi-java-agent-quick-start/" >
                  Quick Start Guide
                  
                </a>
                </li>
                
                <li class="">
                <a href="/projects/minifi/system-admin-guide/" >
                  System Admin Guide
                  
                </a>
                </li>
                
                <li class="">
                <a href="/projects/minifi/download/" >
                  Download
                  
                </a>
                </li>
                
                <li class="">
                <a href="https://cwiki.apache.org/confluence/display/MiNiFi" target="_blank" rel="noopener noreferrer">
                  MiNiFi Wiki
                  <span uk-icon="link"></span>
                </a>
                </li>
                
              </ul>
              

              </li>
              
              <li class="">
                <a href="/projects/registry/" >
                  Registry
                  
                </a>

              

              </li>
              
              <li class="">
                <a href="/projects/fds/" >
                  FDS
                  
                </a>

              

              </li>
              
            </ul>
            
          </li>
          

      </ul>

    </div>
    <div class="uk-navbar-right">
      <ul class="uk-navbar-nav">
        <li>
          <div class="uk-navbar-item">
            <a class="uk-icon-link navbar-icon" uk-icon="icon: github; ratio: 2" href="https://github.com/apache/nifi"></a>
          </div>
        </li>
        <li>
          <div class="uk-navbar-item">
            <a class="uk-button uk-button-primary uk-icon" href="/download/">
              Download
            </a>
          </div>
        </li>
      </ul>
    </div>
  </nav>
</div>
    <main>
  <div class="uk-container">
    <h1 id="getting-started">Getting Started</h1>
<p>This page explains how to configure and deploy MiNiFi agents.</p>
<p>The Java agent is able to run most of <a href="http://nifi.apache.org/docs.html">NiFi&rsquo;s available processors</a>, but is a larger binary distribution (49MB) and consumes greater system resources (24MB max JVM heapsize by default). If you need maximum flexibility to make routing and processing decisions at your data&rsquo;s point of origin, the Java agent is a good fit.</p>
<p>The C++ agent is a smaller binary (3.2MB), consumes low system memory (about 5MB at idle) but has <a href="https://github.com/apache/nifi-minifi-cpp#caveats">a limited subset of processors</a>. If your primary concern is gathering and pushing data to downstream consumers and minimizing system impact, the C++ agent is a good fit.</p>
<ol>
<li>Install the appropriate OS level dependencies:</li>
</ol>
<h4 id="minifi-java">MiNiFi Java:</h4>
<ul>
<li>Java 1.8+</li>
</ul>
<h4 id="minifi-c">MiNiFi C++:</h4>
<h6 id="rhelcentos">RHEL/CentOS:</h6>
<ul>
<li>yum install -y epel-release</li>
<li>yum install -y leveldb</li>
</ul>
<h6 id="debianubuntu">Debian/Ubuntu:</h6>
<ul>
<li>apt install -y libleveldb-dev</li>
<li>apt install -y libxml2</li>
</ul>
<ol start="2">
<li>Download the relevant compressed binary from the <a href="download.html">Downloads</a> page</li>
<li>Copy and decompress the binary to your target deployment environment</li>
<li>Set the MINIFI_HOME environment variable to your decompressed binary directory</li>
<li>From $MINIFI_HOME, ./bin/minifi.sh {start|stop|run|restart|status|flowStatus|dump|install}</li>
</ol>
<p><em>flowStatus</em> and <em>dump</em> are available only for MiNiFi Java.</p>
<p>For MiNiFi Java, the agent logs to $MINIFI_HOME/logs/minifi-app.log.</p>
<p>For MiNiFi C++, the agent logs to $MINIFI_HOME/minifi-app.log.txt</p>
<h1 id="configuring-minifi-agent-flows">Configuring MiNiFi Agent Flows</h1>
<p>Agents execute the flow defined in $MINIFI_HOME/conf/config.yml. The shipped config.yml file has an &ldquo;empty&rdquo; flow.</p>
<p>While it&rsquo;s possible to create and modify config.yml programmatically or by hand, the more common scenario is to:</p>
<ol>
<li>Use NiFi&rsquo;s web interface to define a flow</li>
<li>Save the flow as a template and download its XML file</li>
<li>Use the <a href="minifi-toolkit.html">Converter Toolkit</a> to convert the template XML to an equivalent config.yml</li>
<li>Put the config.yml file in $MINIFI_HOME/conf and start the agent.</li>
</ol>
<h1 id="pushing-data-from-minifi-to-nifi">Pushing Data From MiNiFi to NiFi</h1>
<p>What follows is an illustrated walkthrough of configuring MiNiFi and NiFi to generate and collect log data.</p>
<p>If you&rsquo;re new to NiFi, watch the <a href="http://nifi.apache.org/videos.html">NiFi introductory video series</a> before proceeding. If you don&rsquo;t already have NiFi, you can download it from <a href="http://nifi.apache.org/download.html">here</a>.</p>
<h2 id="configuring-nifi-to-receive-data">Configuring NiFi to Receive Data</h2>
<p>First, check that $NIFI_HOME/conf/nifi.properties has a Site to Site input socket port specified:</p>
<pre tabindex="0"><code># Site to Site properties
nifi.remote.input.host=
nifi.remote.input.secure=false
nifi.remote.input.socket.port=1026
nifi.remote.input.http.enabled=true
nifi.remote.input.http.transaction.ttl=30 sec
</code></pre><p>Restart NiFi so changes take effect.</p>
<p>On NiFi&rsquo;s web UI, place an Input Port &ldquo;From MiNiFi&rdquo; and connect it to a downstream processor.</p>
<h2 id="creating-the-minifi-flow">Creating the MiNiFi Flow</h2>
<p>Create a new process group, and double click on it to enter it. Working inside this new processor group will let us create a clean template that includes flow components meant to run in MiNiFi.</p>
<p>Inside the process group, create a Remote Process Group (RPG) and give it the URL of your NiFi instance. The RPG will connect to NiFi and discover the input port created earlier.</p>
<p>Create a TailFile processor and connect it to the RPG, selecting the &ldquo;From MiNiFi&rdquo; input port.</p>
<p>Now create a template, download it as an XML file, and download the <a href="download.html">Converter ToolKit</a>.</p>
<p>From the toolkit directory:</p>
<pre tabindex="0"><code>[user@host minifi-toolkit-0.0.1]# ./bin/config.sh transform /path/to/template.xml /output/path/config.yml

Java home: /usr/lib/jvm/jre-1.8.0-openjdk
MiNiFi Toolkit home: /minifi-toolkit-0.0.1


No validation errors found in template.
</code></pre><p>Open the config.yml file and add Port and Host to a Properties section at the end of the Input Ports section (at the end of the file):</p>
<pre tabindex="0"><code>Remote Processing Groups:
- name: http://localhost:8080/nifi
  url: http://localhost:8080/nifi
  comment: ''
  timeout: 30 sec
  yield period: 10 sec
  Input Ports:
  - id: AUTOGENERATED_NIFI_PORT_ID_HERE
    name: MiNiFi-input
    comment: ''
    max concurrent tasks: 1
    use compression: false
    Properties: # Deviates from spec and will later be removed when this is autonegotiated		
        Port: 1026		
        Host Name: localhost
</code></pre><p>Copy the generated config.yml file into $MINIFI/conf/config.yml, and start MiNiFi:</p>
<pre tabindex="0"><code>[user@host nifi-minifi-cpp-0.1.0]# ./bin/minifi.sh start
Starting MiNiFi with PID 463 and pid file /nifi-minifi-cpp-0.1.0/bin/.minifi.pid
</code></pre><p>After a few seconds, you should see NiFi receiving data on the input port.</p>
<p>If you do not see data in the queue, it may have already been consumed by the downstream processor (PutFile in this case). If no data is arriving on the input port at all, check the MiNiFi log files, and confirm that the file being tailed exists and is not empty.</p>

  </div>
</main>
    <footer>
  <div class="uk-container">
    <div class="uk-flex uk-grid uk-grid-large">
      <div class="uk-width-1-2@m">
        <p>
          <a class="uk-link-reset" href="/">
            <img src="/images/apache-nifi-logo.svg" class="footer-logo" alt="Apache NiFi Logo"/>
          </a>
          <a class="uk-link-reset" href="https://apache.org">
            <img src="/images/apache-logo.svg" class="footer-logo uk-margin-left" alt="Apache Software Foundation Logo"/>
          </a>
        </p>
        <p>
          Copyright &copy; 2023 The Apache Software Foundation under the terms of the
          <a href="https://www.apache.org/licenses/LICENSE-2.0.html">Apache License, Version 2.0</a>
        </p>
        <p>
          Apache NiFi, NiFi, and the NiFi logo are trademarks of
          <a href="https://apache.org/">The Apache Software Foundation</a>
        </p>
      </div>
      <div class="uk-width-1-4@m">
        <h3><a href="/">Project</a></h3>
        <ul>
          <li><a href="https://issues.apache.org/jira/browse/NIFI">Issues</a></li>
          <li><a href="https://github.com/apache/nifi">Source</a></li>
          <li><a href="https://www.linkedin.com/company/apache-nifi/">LinkedIn</a></li>
        </ul>
      </div>
      <div class="uk-width-1-4@m">
        <h3><a href="https://www.apache.org/">Apache</a></h3>
        <ul>
          <li><a href="https://www.apache.org/licenses/">License</a></li>
          <li><a href="https://privacy.apache.org/policies/privacy-policy-public.html">Privacy Policy</a></li>
          <li><a href="https://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
          <li><a href="https://www.apache.org/security/">Security</a></li>
          <li><a href="https://www.apache.org/foundation/thanks.html">Thanks</a></li>
        </ul>
      </div>
    </div>
  </div>
</footer>
<script src="/uikit/js/uikit.min.js"></script>
    <script src="/uikit/js/uikit-icons.min.js"></script>
  </body>
</html>
