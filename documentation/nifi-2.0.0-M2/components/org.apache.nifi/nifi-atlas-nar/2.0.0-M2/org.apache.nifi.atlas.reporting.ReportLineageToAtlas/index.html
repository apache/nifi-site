<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>ReportLineageToAtlas</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">ReportLineageToAtlas</h1><h2>Description: </h2><p>Report NiFi flow data set level lineage to Apache Atlas. End-to-end lineages across NiFi environments and other systems can be reported if those are connected by different protocols and data set, such as NiFi Site-to-Site, Kafka topic or Hive tables ... etc. Atlas lineage reported by this reporting task can be useful to grasp the high level relationships between processes and data sets, in addition to NiFi provenance events providing detailed event level lineage. See 'Additional Details' for further description and limitations.</p><p><a href="additionalDetails.html">Additional Details...</a></p><h3>Tags: </h3><p>atlas, lineage</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values, and whether a property supports the <a href="../../../../../html/expression-language-guide.html">NiFi Expression Language</a>.</p><table id="properties"><tr><th>Display Name</th><th>API Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name">Atlas URLs</td><td>atlas-urls</td><td></td><td id="allowable-values"></td><td id="description">Comma separated URL of Atlas Servers (e.g. http://atlas-server-hostname:21000 or https://atlas-server-hostname:21443). For accessing Atlas behind Knox gateway, specify Knox gateway URL (e.g. https://knox-hostname:8443/gateway/{topology-name}/atlas). If not specified, 'atlas.rest.address' in Atlas Configuration File is used.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name">Atlas Configuration Directory</td><td>atlas-conf-dir</td><td></td><td id="allowable-values"></td><td id="description">Directory path that contains 'atlas-application.properties' file. If not specified and 'Create Atlas Configuration File' is disabled, then, 'atlas-application.properties' file under root classpath is used.<br/><br/><strong>This property requires exactly one directory to be provided..</strong><br/><br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name"><strong>Create Atlas Configuration File</strong></td><td>atlas-conf-create</td><td id="default-value">false</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">If enabled, 'atlas-application.properties' file will be created in 'Atlas Configuration Directory' automatically when this Reporting Task starts. Note that the existing configuration file will be overwritten.</td></tr><tr><td id="name">Atlas Default Metadata Namespace</td><td>atlas-default-cluster-name</td><td></td><td id="allowable-values"></td><td id="description">Namespace for Atlas entities reported by this ReportingTask. If not specified, 'atlas.metadata.namespace' or 'atlas.cluster.name' (the former having priority) in Atlas Configuration File is used. Multiple mappings can be configured by user defined properties. See 'Additional Details...' for more.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name"><strong>Lineage Strategy</strong></td><td>nifi-lineage-strategy</td><td id="default-value">Simple Path</td><td id="allowable-values"><ul><li>Simple Path <img src="../../../../../html/images/iconInfo.png" alt="Map NiFi provenance events and target Atlas DataSets to statically created 'nifi_flow_path' Atlas Processes. See also 'Additional Details'." title="Map NiFi provenance events and target Atlas DataSets to statically created 'nifi_flow_path' Atlas Processes. See also 'Additional Details'."></img></li><li>Complete Path <img src="../../../../../html/images/iconInfo.png" alt="Create separate 'nifi_flow_path' Atlas Processes for each distinct input and output DataSet combinations by looking at the complete route for a given FlowFile. See also 'Additional Details." title="Create separate 'nifi_flow_path' Atlas Processes for each distinct input and output DataSet combinations by looking at the complete route for a given FlowFile. See also 'Additional Details."></img></li></ul></td><td id="description">Specifies granularity on how NiFi data flow should be reported to Atlas. NOTE: It is strongly recommended to keep using the same strategy once this reporting task started to keep Atlas data clean. Switching strategies will not delete Atlas entities created by the old strategy. Having mixed entities created by different strategies makes Atlas lineage graph noisy. For more detailed description on each strategy and differences, refer 'NiFi Lineage Strategy' section in Additional Details.</td></tr><tr><td id="name"><strong>Provenance Record Start Position</strong></td><td>provenance-start-position</td><td id="default-value">Beginning of Stream</td><td id="allowable-values"><ul><li>Beginning of Stream <img src="../../../../../html/images/iconInfo.png" alt="Start reading provenance Events from the beginning of the stream (the oldest event first)" title="Start reading provenance Events from the beginning of the stream (the oldest event first)"></img></li><li>End of Stream <img src="../../../../../html/images/iconInfo.png" alt="Start reading provenance Events from the end of the stream, ignoring old events" title="Start reading provenance Events from the end of the stream, ignoring old events"></img></li></ul></td><td id="description">If the Reporting Task has never been run, or if its state has been reset by a user, specifies where in the stream of Provenance Events the Reporting Task should start</td></tr><tr><td id="name"><strong>Provenance Record Batch Size</strong></td><td>provenance-batch-size</td><td id="default-value">1000</td><td id="allowable-values"></td><td id="description">Specifies how many records to send in a single batch, at most.</td></tr><tr><td id="name"><strong>NiFi URL for Atlas</strong></td><td>atlas-nifi-url</td><td></td><td id="allowable-values"></td><td id="description">NiFi URL is used in Atlas to represent this NiFi cluster (or standalone instance). It is recommended to use one that can be accessible remotely instead of using 'localhost'.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name"><strong>Atlas Authentication Method</strong></td><td>atlas-authentication-method</td><td id="default-value">Basic</td><td id="allowable-values"><ul><li>Basic <img src="../../../../../html/images/iconInfo.png" alt="Use username and password." title="Use username and password."></img></li><li>Kerberos <img src="../../../../../html/images/iconInfo.png" alt="Use Kerberos keytab file." title="Use Kerberos keytab file."></img></li></ul></td><td id="description">Specify how to authenticate this reporting task to Atlas server.</td></tr><tr><td id="name">Atlas Username</td><td>atlas-username</td><td></td><td id="allowable-values"></td><td id="description">User name to communicate with Atlas.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name">Atlas Password</td><td>atlas-password</td><td></td><td id="allowable-values"></td><td id="description">Password to communicate with Atlas.<br/><strong>Sensitive Property: true</strong><br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name">Kerberos Credentials Service</td><td>kerberos-credentials-service</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>KerberosCredentialsService<br/><strong>Implementation: </strong><a href="../../../nifi-kerberos-credentials-service-nar/2.0.0-M2/org.apache.nifi.kerberos.KeytabCredentialsService/index.html">KeytabCredentialsService</a></td><td id="description">Specifies the Kerberos Credentials Controller Service that should be used for authenticating with Kerberos</td></tr><tr><td id="name">Kerberos Principal</td><td>nifi-kerberos-principal</td><td></td><td id="allowable-values"></td><td id="description">The Kerberos principal for this NiFi instance to access Atlas API and Kafka brokers. If not set, it is expected to set a JAAS configuration file in the JVM properties defined in the bootstrap.conf file. This principal will be set into 'sasl.jaas.config' Kafka's property.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name">Kerberos Keytab</td><td>nifi-kerberos-keytab</td><td></td><td id="allowable-values"></td><td id="description">The Kerberos keytab for this NiFi instance to access Atlas API and Kafka brokers. If not set, it is expected to set a JAAS configuration file in the JVM properties defined in the bootstrap.conf file. This principal will be set into 'sasl.jaas.config' Kafka's property.<br/><br/><strong>This property requires exactly one file to be provided..</strong><br/><br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name">SSL Context Service</td><td>ssl-context-service</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>SSLContextService<br/><strong>Implementations: </strong><a href="../../../nifi-ssl-context-service-nar/2.0.0-M2/org.apache.nifi.ssl.StandardRestrictedSSLContextService/index.html">StandardRestrictedSSLContextService</a><br/><a href="../../../nifi-ssl-context-service-nar/2.0.0-M2/org.apache.nifi.ssl.StandardSSLContextService/index.html">StandardSSLContextService</a></td><td id="description">Specifies the SSL Context Service to use for communicating with Atlas and Kafka.</td></tr><tr><td id="name">Kafka Bootstrap Servers</td><td>kafka-bootstrap-servers</td><td></td><td id="allowable-values"></td><td id="description">Kafka Bootstrap Servers to send Atlas hook notification messages based on NiFi provenance events. E.g. 'localhost:9092' NOTE: Once this reporting task has started, restarting NiFi is required to changed this property as Atlas library holds a unmodifiable static reference to Kafka client.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name"><strong>Kafka Security Protocol</strong></td><td>kafka-security-protocol</td><td id="default-value">PLAINTEXT</td><td id="allowable-values"><ul><li>PLAINTEXT <img src="../../../../../html/images/iconInfo.png" alt="PLAINTEXT" title="PLAINTEXT"></img></li><li>SSL <img src="../../../../../html/images/iconInfo.png" alt="SSL" title="SSL"></img></li><li>SASL_PLAINTEXT <img src="../../../../../html/images/iconInfo.png" alt="SASL_PLAINTEXT" title="SASL_PLAINTEXT"></img></li><li>SASL_SSL <img src="../../../../../html/images/iconInfo.png" alt="SASL_SSL" title="SASL_SSL"></img></li></ul></td><td id="description">Protocol used to communicate with Kafka brokers to send Atlas hook notification messages. Corresponds to Kafka's 'security.protocol' property.</td></tr><tr><td id="name">Kafka Kerberos Service Name</td><td>kafka-kerberos-service-name</td><td id="default-value">kafka</td><td id="allowable-values"></td><td id="description">The service name that matches the primary name of the Kafka server configured in the broker JAAS file. This can be defined either in Kafka's JAAS config or in Kafka's config. Corresponds to Kafka's 'security.protocol' property. It is ignored unless one of the SASL options of the &lt;Security Protocol&gt; are selected.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr><tr><td id="name"><strong>Atlas Connect Timeout</strong></td><td>atlas-connect-timeout</td><td id="default-value">60 sec</td><td id="allowable-values"></td><td id="description">Max wait time for connection to Atlas.</td></tr><tr><td id="name"><strong>Atlas Read Timeout</strong></td><td>atlas-read-timeout</td><td id="default-value">60 sec</td><td id="allowable-values"></td><td id="description">Max wait time for response from Atlas.</td></tr><tr><td id="name"><strong>AWS S3 Model Version</strong></td><td>aws-s3-model-version</td><td id="default-value">v2</td><td id="allowable-values"><ul><li>v1 <img src="../../../../../html/images/iconInfo.png" alt="Creates AWS S3 directory entities version 1 (aws_s3_pseudo_dir)." title="Creates AWS S3 directory entities version 1 (aws_s3_pseudo_dir)."></img></li><li>v2 <img src="../../../../../html/images/iconInfo.png" alt="Creates AWS S3 directory entities version 2 (aws_s3_v2_directory)." title="Creates AWS S3 directory entities version 2 (aws_s3_v2_directory)."></img></li></ul></td><td id="description">Specifies what type of AWS S3 directory entities will be created in Atlas for s3a:// transit URIs (eg. PutHDFS with S3 integration). NOTE: It is strongly recommended to keep using the same AWS S3 entity model version once this reporting task started to keep Atlas data clean. Switching versions will not delete existing Atlas entities created by the old version, nor migrate them to the new version.</td></tr><tr><td id="name"><strong>Filesystem Path Entities Level</strong></td><td>filesystem-paths-level</td><td id="default-value">File</td><td id="allowable-values"><ul><li>File <img src="../../../../../html/images/iconInfo.png" alt="Creates File level paths." title="Creates File level paths."></img></li><li>Directory <img src="../../../../../html/images/iconInfo.png" alt="Creates Directory level paths." title="Creates Directory level paths."></img></li></ul></td><td id="description">Specifies how the filesystem path entities (fs_path and hdfs_path) will be logged in Atlas: File or Directory level. In case of File level, each individual file entity will be sent to Atlas as a separate entity with the full path including the filename. Directory level only logs the path of the parent directory without the filename. This setting affects processors working with files, like GetFile or PutHDFS. NOTE: Although the default value is File level for backward compatibility reasons, it is highly recommended to set it to Directory level because File level logging can generate a huge number of entities in Atlas.</td></tr></table><h3>Dynamic Properties: </h3><p>Supports Sensitive Dynamic Properties: <strong>No</strong></p><p>Dynamic Properties allow the user to specify both the name and value of a property.<table id="dynamic-properties"><tr><th>Name</th><th>Value</th><th>Description</th></tr><tr><td id="name">hostnamePattern.&lt;namespace&gt;</td><td id="value">hostname Regex patterns</td><td>White space delimited (including new line) Regular Expressions to resolve a namespace from a hostname or IP address of a transit URI of NiFi provenance record.<br/><strong>Supports Expression Language: true (will be evaluated using Environment variables only)</strong></td></tr></table></p><h3>State management: </h3><table id="stateful"><tr><th>Scope</th><th>Description</th></tr><tr><td>LOCAL</td><td>Stores the Reporting Task's last event Id so that on restart the task knows where it left off.</td></tr></table><h3>Restricted: </h3>This component is not restricted.<h3>System Resource Considerations:</h3>None specified.</body></html>