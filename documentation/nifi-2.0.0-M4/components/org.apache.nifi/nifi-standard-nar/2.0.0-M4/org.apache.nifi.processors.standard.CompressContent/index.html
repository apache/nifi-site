<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>CompressContent</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">CompressContent</h1><h2>Description: </h2><p>Compresses or decompresses the contents of FlowFiles using a user-specified compression algorithm and updates the mime.type attribute as appropriate. A common idiom is to precede CompressContent with IdentifyMimeType and configure Mode='decompress' AND Compression Format='use mime.type attribute'. When used in this manner, the MIME type is automatically detected and the data is decompressed, if necessary. If decompression is unnecessary, the data is passed through to the 'success' relationship. This processor operates in a very memory efficient way so very large objects well beyond the heap size are generally fine to process.</p><h3>Tags: </h3><p>content, compress, decompress, gzip, bzip2, lzma, xz-lzma2, snappy, snappy-hadoop, snappy framed, lz4-framed, deflate, zstd, brotli</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values.</p><table id="properties"><tr><th>Display Name</th><th>API Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Mode</strong></td><td>Mode</td><td id="default-value">compress</td><td id="allowable-values"><ul><li>compress</li><li>decompress</li></ul></td><td id="description">Indicates whether the processor should compress content or decompress content. Must be either 'compress' or 'decompress'</td></tr><tr><td id="name"><strong>Compression Format</strong></td><td>Compression Format</td><td id="default-value">use mime.type attribute</td><td id="allowable-values"><ul><li>use mime.type attribute</li><li>gzip</li><li>deflate</li><li>bzip2</li><li>xz-lzma2</li><li>lzma</li><li>snappy</li><li>snappy-hadoop</li><li>snappy framed</li><li>lz4-framed</li><li>zstd</li><li>brotli</li></ul></td><td id="description">The compression format to use. Valid values are: GZIP, Deflate, ZSTD, BZIP2, XZ-LZMA2, LZMA, Brotli, Snappy, Snappy Hadoop, Snappy Framed, and LZ4-Framed</td></tr><tr><td id="name"><strong>Compression Level</strong></td><td>Compression Level</td><td id="default-value">1</td><td id="allowable-values"><ul><li>0</li><li>1</li><li>2</li><li>3</li><li>4</li><li>5</li><li>6</li><li>7</li><li>8</li><li>9</li></ul></td><td id="description">The compression level to use; this is valid only when using gzip, deflate or xz-lzma2 compression. A lower value results in faster processing but less compression; a value of 0 indicates no (that is, simple archiving) for gzip or minimal for xz-lzma2 compression. Higher levels can mean much larger memory usage such as the case with levels 7-9 for xz-lzma/2 so be careful relative to heap size.<br/><br/><strong>This Property is only considered if all of the following conditions are met:</strong><ul><li>The [Mode] Property has a value of "compress".</li><li>The [Compression Format] Property is set to one of the following values: [zstd], [use mime.type attribute], [deflate], [brotli], [gzip], [xz-lzma2]</li></ul></td></tr><tr><td id="name"><strong>Update Filename</strong></td><td>Update Filename</td><td id="default-value">false</td><td id="allowable-values"><ul><li>true</li><li>false</li></ul></td><td id="description">If true, will remove the filename extension when decompressing data (only if the extension indicates the appropriate compression format) and add the appropriate extension when compressing data</td></tr></table><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>failure</td><td>FlowFiles will be transferred to the failure relationship if they fail to compress/decompress</td></tr><tr><td>success</td><td>FlowFiles will be transferred to the success relationship after successfully being compressed or decompressed</td></tr></table><h3>Reads Attributes: </h3><table id="reads-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>mime.type</td><td>If the Compression Format is set to use mime.type attribute, this attribute is used to determine the compression type. Otherwise, this attribute is ignored.</td></tr></table><h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>mime.type</td><td>If the Mode property is set to compress, the appropriate MIME Type is set. If the Mode property is set to decompress and the file is successfully decompressed, this attribute is removed, as the MIME Type is no longer known.</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component requires an incoming relationship.<h2>Example Use Cases:</h2><h3>Use Case:</h3><p>Compress the contents of a FlowFile</p><h4>Configuration:</h4><p>"Mode" = "compress"</p><p>"Compression Format" should be set to whichever compression algorithm should be used.</p><br></br><h3>Use Case:</h3><p>Decompress the contents of a FlowFile</p><h4>Configuration:</h4><p>"Mode" = "decompress"</p><p>"Compression Format" should be set to whichever compression algorithm was used to compress the data previously.</p><br></br><h2>Example Use Cases Involving Other Components:</h2><h3>Use Case:</h3><p>Check whether or not a FlowFile is compressed and if so, decompress it.</p><h4>Notes:</h4><p>If IdentifyMimeType determines that the content is not compressed, CompressContent will pass the FlowFile along to the 'success' relationship without attempting to decompress it.</p><h4>Keywords:</h4>auto, detect, mime type, compress, decompress, gzip, bzip2<h4>Components involved:</h4><strong>Component Type: </strong><span>org.apache.nifi.processors.standard.IdentifyMimeType</span><h4>Configuration:</h4><p>Default property values are sufficient.</p><p>Connect the 'success' relationship to CompressContent.</p><br></br><strong>Component Type: </strong><span>org.apache.nifi.processors.standard.CompressContent</span><h4>Configuration:</h4><p>"Mode" = "decompress"</p><p>"Compression Format" = "use mime.type attribute"</p><br></br><br></br><h3>System Resource Considerations:</h3><table id="system-resource-considerations"><tr><th>Resource</th><th>Description</th></tr><tr><td>CPU</td><td>An instance of this component can cause high usage of this system resource.  Multiple instances or high concurrency settings may result a degradation of performance.</td></tr><tr><td>MEMORY</td><td>An instance of this component can cause high usage of this system resource.  Multiple instances or high concurrency settings may result a degradation of performance.</td></tr></table></body></html>