<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>UpdateRecord</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">UpdateRecord</h1><h2>Description: </h2><p>Updates the contents of a FlowFile that contains Record-oriented data (i.e., data that can be read via a RecordReader and written by a RecordWriter). This Processor requires that at least one user-defined Property be added. The name of the Property should indicate a RecordPath that determines the field that should be updated. The value of the Property is either a replacement value (optionally making use of the Expression Language) or is itself a RecordPath that extracts a value from the Record. Whether the Property value is determined to be a RecordPath or a literal value depends on the configuration of the &lt;Replacement Value Strategy&gt; Property.</p><p><a href="additionalDetails.html">Additional Details...</a></p><h3>Tags: </h3><p>update, record, generic, schema, json, csv, avro, log, logs, freeform, text</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values.</p><table id="properties"><tr><th>Display Name</th><th>API Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Record Reader</strong></td><td>Record Reader</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordReaderFactory<br/><strong>Implementations: </strong><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.json.JsonPathReader/index.html">JsonPathReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.syslog.Syslog5424Reader/index.html">Syslog5424Reader</a><br/><a href="../../../nifi-scripting-nar/2.0.0-M4/org.apache.nifi.record.script.ScriptedReader/index.html">ScriptedReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.cef.CEFReader/index.html">CEFReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.avro.AvroReader/index.html">AvroReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.csv.CSVReader/index.html">CSVReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.json.JsonTreeReader/index.html">JsonTreeReader</a><br/><a href="../../../nifi-protobuf-services-nar/2.0.0-M4/org.apache.nifi.services.protobuf.ProtobufReader/index.html">ProtobufReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.windowsevent.WindowsEventLogReader/index.html">WindowsEventLogReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.syslog.SyslogReader/index.html">SyslogReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.xml.XMLReader/index.html">XMLReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.lookup.ReaderLookup/index.html">ReaderLookup</a><br/><a href="../../../nifi-poi-nar/2.0.0-M4/org.apache.nifi.excel.ExcelReader/index.html">ExcelReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.yaml.YamlTreeReader/index.html">YamlTreeReader</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.grok.GrokReader/index.html">GrokReader</a></td><td id="description">Specifies the Controller Service to use for reading incoming data</td></tr><tr><td id="name"><strong>Record Writer</strong></td><td>Record Writer</td><td></td><td id="allowable-values"><strong>Controller Service API: </strong><br/>RecordSetWriterFactory<br/><strong>Implementations: </strong><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.lookup.RecordSetWriterLookup/index.html">RecordSetWriterLookup</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.avro.AvroRecordSetWriter/index.html">AvroRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.text.FreeFormTextRecordSetWriter/index.html">FreeFormTextRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.json.JsonRecordSetWriter/index.html">JsonRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.xml.XMLRecordSetWriter/index.html">XMLRecordSetWriter</a><br/><a href="../../../nifi-scripting-nar/2.0.0-M4/org.apache.nifi.record.script.ScriptedRecordSetWriter/index.html">ScriptedRecordSetWriter</a><br/><a href="../../../nifi-record-serialization-services-nar/2.0.0-M4/org.apache.nifi.csv.CSVRecordSetWriter/index.html">CSVRecordSetWriter</a></td><td id="description">Specifies the Controller Service to use for writing out the records</td></tr><tr><td id="name"><strong>Replacement Value Strategy</strong></td><td>Replacement Value Strategy</td><td id="default-value">Literal Value</td><td id="allowable-values"><ul><li>Literal Value <img src="../../../../../html/images/iconInfo.png" alt="The value entered for a Property (after Expression Language has been evaluated) is the desired value to update the Record Fields with. Expression Language may reference variables 'field.name', 'field.type', and 'field.value' to access information about the field and the value of the field being evaluated." title="The value entered for a Property (after Expression Language has been evaluated) is the desired value to update the Record Fields with. Expression Language may reference variables 'field.name', 'field.type', and 'field.value' to access information about the field and the value of the field being evaluated."></img></li><li>Record Path Value <img src="../../../../../html/images/iconInfo.png" alt="The value entered for a Property (after Expression Language has been evaluated) is not the literal value to use but rather is a Record Path that should be evaluated against the Record, and the result of the RecordPath will be used to update the Record. Note that if this option is selected, and the Record Path results in multiple values for a given Record, the input FlowFile will be routed to the 'failure' Relationship." title="The value entered for a Property (after Expression Language has been evaluated) is not the literal value to use but rather is a Record Path that should be evaluated against the Record, and the result of the RecordPath will be used to update the Record. Note that if this option is selected, and the Record Path results in multiple values for a given Record, the input FlowFile will be routed to the 'failure' Relationship."></img></li></ul></td><td id="description">Specifies how to interpret the configured replacement values</td></tr></table><h3>Dynamic Properties: </h3><p>Supports Sensitive Dynamic Properties: <strong>No</strong></p><p>Dynamic Properties allow the user to specify both the name and value of a property.<table id="dynamic-properties"><tr><th>Name</th><th>Value</th><th>Description</th></tr><tr><td id="name">A RecordPath.</td><td id="value">The value to use to replace fields in the record that match the RecordPath</td><td>Allows users to specify values to use to replace fields in the record that match the RecordPath.<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and Environment variables)</strong></td></tr></table></p><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>failure</td><td>If a FlowFile cannot be transformed from the configured input format to the configured output format, the unchanged FlowFile will be routed to this relationship</td></tr><tr><td>success</td><td>FlowFiles that are successfully transformed will be routed to this relationship</td></tr></table><h3>Reads Attributes: </h3>None specified.<h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>record.index</td><td>This attribute provides the current row index and is only available inside the literal value expression.</td></tr><tr><td>record.error.message</td><td>This attribute provides on failure the error message encountered by the Reader or Writer.</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component requires an incoming relationship.<h2>Example Use Cases:</h2><h3>Use Case:</h3><p>Combine multiple fields into a single field.</p><h4>Keywords:</h4>combine, concatenate, recordpath<h4>Configuration:</h4><p>"Replacement Value Strategy" = "Record Path Value"</p><p></p><p>A single additional property is added to the Processor. The name of the property is a RecordPath identifying the field to place the result in.</p><p>The value of the property uses the CONCAT Record Path function to concatenate multiple values together, potentially using other string literal values.</p><p>For example, to combine the <code>title</code>, <code>firstName</code> and <code>lastName</code> fields into a single field named <code>fullName</code>, we add a property with the name <code>/fullName</code> and a value of <code>CONCAT(/title, ' ', /firstName, ' ', /lastName)</code></p><br></br><h3>Use Case:</h3><p>Change the value of a record field to an explicit value.</p><h4>Keywords:</h4>change, update, replace, transform<h4>Configuration:</h4><p>    "Replacement Value Strategy" = "Literal Value"</p><p></p><p>    A single additional property is added to the Processor. The name of the property is a RecordPath identifying the field to place the result in.</p><p>    The value of the property is the explicit value to set the field to. For example, we can set any field with a name of <code>txId</code>, regardless of its level in the data's hierarchy,     to <code>1111-1111</code> by adding a property with a name of <code>//txId</code> and a value of <code>1111-1111</code></p><br></br><h3>Use Case:</h3><p>Copy the value of one record field to another record field.</p><h4>Keywords:</h4>change, update, copy, recordpath, hierarchy, transform<h4>Configuration:</h4><p>    "Replacement Value Strategy" = "Record Path Value"</p><p></p><p>    A single additional property is added to the Processor. The name of the property is a RecordPath identifying the field to update.</p><p>    The value of the property is a RecordPath identifying the field to copy the value from.</p><p>    For example, we can copy the value of <code>/identifiers/all/imei</code> to the <code>identifier</code> field at the root level, by adding a property named     <code>/identifier</code> with a value of <code>/identifiers/all/imei</code>.</p><br></br><h3>Use Case:</h3><p>Enrich data by injecting the value of an attribute into each Record.</p><h4>Keywords:</h4>enrich, attribute, change, update, replace, insert, transform<h4>Configuration:</h4><p>"Replacement Value Strategy" = "Literal Value"</p><p></p><p>A single additional property is added to the Processor. The name of the property is a RecordPath identifying the field to place the result in.</p><p>The value of the property is an Expression Language expression that references the attribute of interest. We can, for example, insert a new field name <code>filename</code> into each record by adding a property named <code>/filename</code> with a value of <code>${filename}</code></p><br></br><h3>Use Case:</h3><p>Change the format of a record field's value.</p><h4>Notes:</h4><p>Use the RenameRecordField Processor in order to change a field's name.</p><h4>Keywords:</h4>change, update, replace, insert, transform, format, date/time, timezone, expression language<h4>Configuration:</h4><p>"Replacement Value Strategy" = "Literal Value"</p><p></p><p>A single additional property is added to the Processor. The name of the property is a RecordPath identifying the field to update.</p><p>The value is an Expression Language expression that references the <code>field.value</code> variable. For example, to change the date/time format of a field named <code>txDate</code> from <code>year-month-day</code> format to <code>month/day/year</code> format, we add a property named <code>/txDate</code> with a value of <code>${field.value:toDate('yyyy-MM-dd'):format('MM/dd/yyyy')}</code>. We could also change the timezone of a timestamp field (and insert the timezone for clarity) by using a value of <code>${field.value:toDate('yyyy-MM-dd HH:mm:ss', 'UTC-0400'):format('yyyy-MM-dd HH:mm:ss Z', 'UTC')}</code>.</p><br></br><h3>System Resource Considerations:</h3>None specified.<h3>See Also:</h3><p><a href="../org.apache.nifi.processors.standard.ConvertRecord/index.html">ConvertRecord</a></p></body></html>