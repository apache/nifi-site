<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"></meta><title>RouteOnAttribute</title><link rel="stylesheet" href="../../../../../css/component-usage.css" type="text/css"></link></head><script type="text/javascript">window.onload = function(){if(self==top) { document.getElementById('nameHeader').style.display = "inherit"; } }</script><body><h1 id="nameHeader" style="display: none;">RouteOnAttribute</h1><h2>Description: </h2><p>Routes FlowFiles based on their Attributes using the Attribute Expression Language</p><p><a href="additionalDetails.html">Additional Details...</a></p><h3>Tags: </h3><p>attributes, routing, Attribute Expression Language, regexp, regex, Regular Expression, Expression Language, find, text, string, search, filter, detect</p><h3>Properties: </h3><p>In the list below, the names of required properties appear in <strong>bold</strong>. Any other properties (not in bold) are considered optional. The table also indicates any default values.</p><table id="properties"><tr><th>Display Name</th><th>API Name</th><th>Default Value</th><th>Allowable Values</th><th>Description</th></tr><tr><td id="name"><strong>Routing Strategy</strong></td><td>Routing Strategy</td><td id="default-value">Route to Property name</td><td id="allowable-values"><ul><li>Route to Property name <img src="../../../../../html/images/iconInfo.png" alt="A copy of the FlowFile will be routed to each relationship whose corresponding expression evaluates to 'true'" title="A copy of the FlowFile will be routed to each relationship whose corresponding expression evaluates to 'true'"></img></li><li>Route to 'matched' if all match <img src="../../../../../html/images/iconInfo.png" alt="Requires that all user-defined expressions evaluate to 'true' for the FlowFile to be considered a match" title="Requires that all user-defined expressions evaluate to 'true' for the FlowFile to be considered a match"></img></li><li>Route to 'matched' if any matches <img src="../../../../../html/images/iconInfo.png" alt="Requires that at least one user-defined expression evaluate to 'true' for the FlowFile to be considered a match" title="Requires that at least one user-defined expression evaluate to 'true' for the FlowFile to be considered a match"></img></li></ul></td><td id="description">Specifies how to determine which relationship to use when evaluating the Expression Language</td></tr></table><h3>Dynamic Properties: </h3><p>Supports Sensitive Dynamic Properties: <strong>No</strong></p><p>Dynamic Properties allow the user to specify both the name and value of a property.<table id="dynamic-properties"><tr><th>Name</th><th>Value</th><th>Description</th></tr><tr><td id="name">Relationship Name</td><td id="value">Expression Language expression that returns a boolean value indicating whether or not the FlowFile should be routed to this Relationship</td><td>Routes FlowFiles whose attributes match the Expression Language specified in the Dynamic Property Value to the Relationship specified in the Dynamic Property Key<br/><strong>Supports Expression Language: true (will be evaluated using flow file attributes and Environment variables)</strong></td></tr></table></p><h3>Relationships: </h3><table id="relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>unmatched</td><td>FlowFiles that do not match any user-define expression will be routed here</td></tr></table><h3>Dynamic Relationships: </h3><p>A Dynamic Relationship may be created based on how the user configures the Processor.<table id="dynamic-relationships"><tr><th>Name</th><th>Description</th></tr><tr><td>Name from Dynamic Property</td><td>FlowFiles that match the Dynamic Property's Attribute Expression Language</td></tr></table></p><h3>Reads Attributes: </h3>None specified.<h3>Writes Attributes: </h3><table id="writes-attributes"><tr><th>Name</th><th>Description</th></tr><tr><td>RouteOnAttribute.Route</td><td>The relation to which the FlowFile was routed</td></tr></table><h3>State management: </h3>This component does not store state.<h3>Restricted: </h3>This component is not restricted.<h3>Input requirement: </h3>This component requires an incoming relationship.<h2>Example Use Cases:</h2><h3>Use Case:</h3><p>Route data to one or more relationships based on its attributes using the NiFi Expression Language.</p><h4>Keywords:</h4>attributes, routing, expression language<h4>Configuration:</h4><p>Set the "Routing Strategy" property to "Route to Property name".</p><p>For each route that a FlowFile might be routed to, add a new property. The name of the property should describe the route.</p><p>The value of the property is an Attribute Expression Language expression that returns a boolean value indicating whether or not a given FlowFile will be routed to the associated relationship.</p><p></p><p>For example, we might route data based on its file extension using the following properties:</p><p>    - "Routing Strategy" = "Route to Property Name"</p><p>    - "jpg" = "${filename:endsWith('.jpg')}"</p><p>    - "png" = "${filename:endsWith('.png')}"</p><p>    - "pdf" = "${filename:endsWith('.pdf')}"</p><p></p><p>The Processor will now have 3 relationships: <code>jpg</code>, <code>png</code>, and <code>pdf</code>. Each of these should be connected to the appropriate downstream processor.</p><br></br><h3>Use Case:</h3><p>Keep data only if its attributes meet some criteria, such as its filename ends with .txt.</p><h4>Keywords:</h4>keep, filter, remove, delete, expression language<h4>Configuration:</h4><p>Add a new property for each condition that must be satisfied in order to keep the data.</p><p>If the data should be kept in the case that any of the provided conditions is met, set the "Routing Strategy" property to "Route to 'matched' if any matches".</p><p>If all conditions must be met in order to keep the data, set the "Routing Strategy" property  to "Route to 'matched' if all match".</p><p></p><p>For example, to keep files whose filename ends with .txt and have a file size of at least 1000 bytes, we will use the following properties:</p><p>    - "ends_with_txt" = "${filename:endsWith('.txt')}"</p><p>    - "large_enough" = "${fileSize:ge(1000)}</p><p>    - "Routing Strategy" = "Route to 'matched' if all match"</p><p></p><p>Auto-terminate the 'unmatched' relationship.</p><p>Connect the 'matched' relationship to the next processor in the flow.</p><br></br><h3>Use Case:</h3><p>Discard or drop a file based on attributes, such as filename.</p><h4>Keywords:</h4>discard, drop, filter, remove, delete, expression language<h4>Configuration:</h4><p>Add a new property for each condition that must be satisfied in order to drop the data.</p><p>If the data should be dropped in the case that any of the provided conditions is met, set the "Routing Strategy" property to "Route to 'matched' if any matches".</p><p>If all conditions must be met in order to drop the data, set the "Routing Strategy" property  to "Route to 'matched' if all match".</p><p></p><p>Here are a couple of examples for configuring the properties:</p><p>    Example 1 Use Case: Data should be dropped if its "uuid" attribute has an 'a' in it or ends with '0'.</p><p>      Here, we will use the following properties:</p><p>        - "has_a" = "${uuid:contains('a')}"</p><p>        - "ends_with_0" = "${uuid:endsWith('0')}</p><p>        - "Routing Strategy" = "Route to 'matched' if any matches"</p><p>    Example 2 Use Case: Data should be dropped if its 'uuid' attribute has an 'a' AND it ends with a '1'.</p><p>      Here, we will use the following properties:</p><p>        - "has_a" = "${uuid:contains('a')}"</p><p>        - "ends_with_1" = "${uuid:endsWith('1')}</p><p>        - "Routing Strategy" = "Route to 'matched' if all match"</p><p></p><p>Auto-terminate the 'matched' relationship.</p><p>Connect the 'unmatched' relationship to the next processor in the flow.</p><br></br><h2>Example Use Cases Involving Other Components:</h2><h3>Use Case:</h3><p>Route record-oriented data based on whether or not the record's values meet some criteria</p><h4>Keywords:</h4>record, route, content, data<h4>Components involved:</h4><strong>Component Type: </strong><span>org.apache.nifi.processors.standard.PartitionRecord</span><h4>Configuration:</h4><p>Choose a RecordReader that is appropriate based on the format of the incoming data.</p><p>Choose a RecordWriter that writes the data in the desired output format.</p><p></p><p>Add a single additional property. The name of the property should describe the criteria to route on. The property's value should be a RecordPath that returns <code>true</code> if the Record meets the criteria or <code>false</code> otherwise. This adds a new attribute to the FlowFile whose name is equal to the property name.</p><p></p><p>Connect the 'success' Relationship to RouteOnAttribute.</p><br></br><strong>Component Type: </strong><span>org.apache.nifi.processors.standard.RouteOnAttribute</span><h4>Configuration:</h4><p>Set "Routing Strategy" to "Route to Property name"</p><p></p><p>Add two additional properties. For the first one, the name of the property should describe data that matches the criteria. The value is an Expression Language expression that checks if the attribute added by the PartitionRecord processor has a value of <code>true</code>. For example, <code>${criteria:equals('true')}</code>.</p><p>The second property should have a name that describes data that does not match the criteria. The value is an Expression Language that evaluates to the opposite of the first property value. For example, <code>${criteria:equals('true'):not()}</code>.</p><p></p><p>Connect each of the newly created Relationships to the appropriate downstream processors.</p><br></br><br></br><h3>System Resource Considerations:</h3>None specified.</body></html>